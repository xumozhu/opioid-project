# ğŸ“Š Quantifying the Impact of State-Level Opioid Policies on Overdose Mortality in the U.S.
*A Predictive and Policy-Informed Data Science Approach*

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)]()
[![Streamlit](https://img.shields.io/badge/Streamlit-dashboard-brightgreen.svg)]()
[![Status](https://img.shields.io/badge/status-in%20progress-orange.svg)]()

---

## ğŸš€ Overview
This project analyzes the effectiveness of **state-level opioid policies** on overdose mortality across U.S. states (2010â€“2020).  
By integrating **policy variables (PDMP, Naloxone Access, Medicaid Expansion)** with **socioâ€‘economic controls** (poverty, unemployment, median income), we build a **stateâ€“year panel dataset**, conduct **policy evaluation (mixed/fixed effects)**, and train **ML models** for prediction and interpretation.  
The goal is to provide **policyâ€‘informed, dataâ€‘driven insights** with an interactive **Streamlit dashboard**.

> **Why it matters:** The U.S. opioid crisis has caused hundreds of thousands of deaths. States adopted varied interventions with mixed outcomes. This project quantifies what works, where, and for whomâ€”through transparent analysis and reproducible code.

---

## ğŸ”— Live Demo
- **Interactive Dashboard (Streamlit):** _coming soon_ â†’ add your URL here, e.g. `https://<username>-opioid-project.streamlit.app`
- **Report PDF:** _coming soon_
- **Slides / 1â€‘pager:** _coming soon_

---

## ğŸ§± Repository Structure
opioid-project/
â”‚
â”œâ”€â”€ datasets/
â”‚ â”œâ”€â”€ opioid_mortality_raw.csv
â”‚ â”œâ”€â”€ opioid_mortality_cleaned.csv
â”‚ â”œâ”€â”€ pdmp_raw.csv â”œâ”€â”€ pdmp_cleaned.csv
â”‚ â”œâ”€â”€ naloxone_raw.csv â”œâ”€â”€ naloxone_cleaned.csv
â”‚ â”œâ”€â”€ medicaid_expansion_cleaned.csv
â”‚ â”œâ”€â”€ poverty_cleaned.csv
â”‚ â”œâ”€â”€ unemploymentRate_cleaned.csv
â”‚ â”œâ”€â”€ median_income raw.csv â”œâ”€â”€ median_income_cleaned.csv
â”‚ â”œâ”€â”€ merged_data.csv
â”‚ â”œâ”€â”€ merged_data_withpoverty.csv
â”‚ â”œâ”€â”€ merged_data_with_unemployment.csv
â”‚ â””â”€â”€ merged_data_final.csv # final panel: one row per state-year
â”‚
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ clean_mortality_data.py
â”‚ â”œâ”€â”€ clean_pdmp_data.py
â”‚ â”œâ”€â”€ clean_naloxone_data.py
â”‚ â”œâ”€â”€ clean_poverty_data.py
â”‚ â”œâ”€â”€ merge_income.py
â”‚ â”œâ”€â”€ merge_medicaid.py
â”‚ â”œâ”€â”€ merge_poverty_data.py
â”‚ â”œâ”€â”€ merge_unemployment_data.py
â”‚ â”œâ”€â”€ merge_naloxone_data.py
â”‚ â”œâ”€â”€ merge_data.py # assemble final panel
â”‚ â”œâ”€â”€ eda_analysis.py # trends, heatmaps, correlations
â”‚ â”œâ”€â”€ eda_policy_trends.py
â”‚ â”œâ”€â”€ eda_poverty_correlation.py
â”‚ â”œâ”€â”€ policy_regression.py # FE / baseline regressions
â”‚ â”œâ”€â”€ mixed_effects_regression.py # MixedLM (random effect = state)
â”‚ â”œâ”€â”€ ml_forecast.py # RF / XGBoost + plots
â”‚ â””â”€â”€ streamlit_app.py # interactive dashboard
â”‚
â”œâ”€â”€ outputs/
â”‚ â”œâ”€â”€ overall_death_trend.png
â”‚ â”œâ”€â”€ avg_death_rate_trend.png
â”‚ â”œâ”€â”€ state_year_rate_heatmap.png
â”‚ â”œâ”€â”€ pdmp_adoption_trend.png
â”‚ â”œâ”€â”€ income_vs_deathrate.png
â”‚ â”œâ”€â”€ poverty_vs_deathrate.png
â”‚ â”œâ”€â”€ unemp_vs_deathrate.png
â”‚ â”œâ”€â”€ feature_correlation.png
â”‚ â”œâ”€â”€ feature_importance.png
â”‚ â”œâ”€â”€ predicted_vs_actual.png
â”‚ â”œâ”€â”€ predicted_vs_actual_2019.png
â”‚ â”œâ”€â”€ predicted_vs_actual_2020.png
â”‚ â”œâ”€â”€ policy_coef_plot.png
â”‚ â”œâ”€â”€ policy_regression_summary.txt
â”‚ â””â”€â”€ mixed_effects_summary.txt
â”‚
â”œâ”€â”€ report/ # final PDF / slides (optional)
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md


---

## ğŸ”¬ Data & Sources
- **Mortality:** CDC WONDER / KFF (opioid overdose death rates)  
- **Policies:** PDAPS, NCSL (PDMP, Naloxone Access, Medicaid Expansion)  
- **Socio-economic:** KFF / Census (poverty, unemployment, median income)  

---

## âœ Methods
**1) Preprocessing**  
- Standardize to `state-year` format  
- Encode policies as binary (0/1)  
- Merge socio-economic covariates  

**2) EDA**  
- Yearly trends and heatmaps  
- Cross-plots: poverty, unemployment, income vs mortality  
- Policy adoption timelines  

**3) Statistical Modeling**  
- **Mixed Effects Regression** (random effect: state)  
- Example: `medicaid_expansion` coefficient â‰ˆ **+5.55**, *p* < 0.001  
- Weak causal interpretation with controls  

**4) Machine Learning**  
- Random Forest & XGBoost  
- **Best RÂ² â‰ˆ 0.575**  
- Feature importance: poverty, PDMP, Medicaid expansion  

---

## ğŸ“ˆ Key Findings
- **PDMP implementation:** +3.48, *p* = 0.003 â†’ significant positive correlation  
- **Medicaid expansion:** +5.55, *p* < 0.001  
- **Poverty (scaled):** âˆ’2.47, *p* = 0.012  
- **Naloxone access / Unemployment:** not significant  
- **State random effect variance:** ~47  

> âš ï¸ Note: Positive coefficients for PDMP/Medicaid likely reflect **policy lags, reporting differences, or confounding**, not â€œpolicies increase mortality.â€  

---

## ğŸ“¸ Selected Figures
![Feature Importance](outputs/feature_importance.png)  
![Predicted vs Actual](outputs/predicted_vs_actual.png)  
![Policy Coefficients](outputs/policy_coef_plot.png)  
![Poverty vs Deaths](outputs/poverty_vs_deathrate.png)  

---

## ğŸ” Reproducibility
```bash
# 1) Create environment
conda create -n opioid-env python=3.10 -y
conda activate opioid-env

# 2) Install dependencies
pip install -r requirements.txt

# 3) (Optional) Rebuild panel data
python src/merge_data.py

# 4) Run EDA
python src/eda_analysis.py

# 5) Policy regressions
python src/mixed_effects_regression.py

# 6) ML forecasting
python src/ml_forecast.py

# 7) Launch dashboard
streamlit run src/streamlit_app.py

---

## ğŸ› ï¸ Tech Stack
- **Python**: pandas, numpy, matplotlib, seaborn, statsmodels, scikit-learn, xgboost, streamlit  
- **Visualization**: Streamlit, Plotly  
- **Version control**: GitHub  

---

## ğŸ“„ Deliverables
- ğŸ“Š Interactive Streamlit dashboard  
- ğŸ“˜ PDF report  
- ğŸ“‚ GitHub repository (with full pipeline & outputs)  
- ğŸ“ 1-page project summary (for resume/SOP)  

---

## âœï¸ Author
**Xumo Zhu**  
UC San Diego Â· B.S. Mathâ€“Statistics & Probability (Mar 2025)   

- **GitHub:** [xumozhu](https://github.com/xumozhu)  
- **LinkedIn:** [Xumo Zhu](https://www.linkedin.com/in/xumo-z-a39b1524b/)  
- **Email:** xumozhu516@gmail.com
